<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/reset.css" />
  <link rel="stylesheet" href="css/style.css" />
  <title>Calculator Web App</title>
</head>

<body>
  <div id="main-container">
    <div id="displayDiv"></div>
    <div id="grid-container">
      <div class="button color1" id="clear">C</div>
      <div class="button color1" id="posNeg">+/-</div>
      <div class="button color1" id="percentage">%</div>
      <div class="button operator color2" id="divide">/</div>
      <div class="button number color3" id="seven">7</div>
      <div class="button number color3" id="eight">8</div>
      <div class="button number color3" id="nine">9</div>
      <div class="button operator color2" id="multiply">*</div>
      <div class="button number color3" id="four">4</div>
      <div class="button number color3" id="five">5</div>
      <div class="button number color3" id="six">6</div>
      <div class="button operator color2" id="subtract">-</div>
      <div class="button number color3" id="one">1</div>
      <div class="button number color3" id="two">2</div>
      <div class="button number color3" id="three">3</div>
      <div class="button operator color2" id="addition">+</div>
      <div class="button number color3" id="zero">0</div>
      <div class="button color3" id="decimal">.</div>
      <div class="button color2" id="equals">=</div>
    </div>
  </div>

  <script>
    let a;
    let b;
    let operator;

    function add(a, b) {
      return parseFloat(a) + parseFloat(b);
    }

    function subtract(a, b) {
      return parseFloat(a) - parseFloat(b);
    }

    function multiply(a, b) {
      return parseFloat(a) * parseFloat(b);
    }

    function divide(a, b) {
      return parseFloat(a) / parseFloat(b);
    }

    function percent(a){
      return parseFloat(a) / 100;
    }

    function operate(operator, a, b) {
      if (operator == "+") {
        return add(a, b);
      } else if (operator == "-") {
        return subtract(a, b);
      } else if (operator == "*") {
        return multiply(a, b);
      } else if (operator == "/") {
        return divide(a, b);
      }
    }


    const numbers = Array.from(document.querySelectorAll(".number"));
    const display = document.querySelector("#displayDiv");
    for (let i = 0; i < numbers.length; i++) {
      numbers[i].addEventListener("click", function () {
        if (typeof a == "undefined" && typeof operator == "undefined") {
          display.textContent = numbers[i].textContent;
          a = numbers[i].textContent;
        } else if (typeof a == "string" && typeof operator == "undefined") {
          display.textContent = a + numbers[i].textContent;
          a = a + numbers[i].textContent;
        } else if (typeof b == "undefined" && typeof operator == "string"){
          display.textContent = numbers[i].textContent;
          b = numbers[i].textContent;
        } else {
          display.textContent = b + numbers[i].textContent;
          b = b + numbers[i].textContent;
        }
      });
    }

    const operators = Array.from(document.querySelectorAll(".operator"));
    for (let i = 0; i < operators.length; i++) {
      operators[i].addEventListener("click", function () {
        if (typeof operator == "undefined") {
          display.textContent = "";
          display.textContent = operators[i].textContent;
          operator = operators[i].textContent;
        } else {
          display.textContent = operate(operator, a, b);
          a = operate(operator, a, b);
          b = "";
          operator = operators[i].textContent;
          console.log(operators[i])
        }
      });
    }

    const equals = document.querySelector("#equals");
    equals.addEventListener("click", function () {
      display.textContent = operate(operator, a, b);
    });

    const clear = document.querySelector("#clear");
    clear.addEventListener('click', function() {
      display.textContent = "";
      operator = undefined;
      a = undefined;
      b = undefined;
    });

    const decimal = document.querySelector("#decimal");
    decimal.addEventListener("click", function(){
      if (typeof a == "undefined" && typeof operator == "undefined") {
          display.textContent = ".";
          a = ".";
        } else if (typeof a == "string" && typeof operator == "undefined") {
          display.textContent = a + ".";
          a = a + ".";
        } else if (typeof b == "undefined" && typeof operator == "string"){
          display.textContent = ".";
          b = ".";
        } else {
          display.textContent = b + "."
          b = b + ".";
        }
    });


    const posNeg = document.querySelector("#posNeg");
    posNeg.addEventListener("click", function() {
      if (typeof a == "undefined" && typeof operator == "undefined") {
          display.textContent = "-";
          a = "-";
        } else if (typeof a == "string" && typeof operator == "undefined") {
          display.textContent = "-" + a;
          a = "-" + a;
        } else if (typeof b == "undefined" && typeof operator == "string"){
          display.textContent = "-";
          b = "-";
        } else {
          display.textContent = "-" + b;
          b = "-" + b;
        }
    });

    const percentage = document.querySelector("#percentage")
    percentage.addEventListener("click", function(){
      if (typeof a == "undefined" && typeof operator == "undefined") {

        } else if (typeof a == "string" && typeof operator == "undefined") {
          display.textContent = percent(a);
          a = percent(a);
        } else if (typeof b == "undefined" && typeof operator == "string"){

        } else {
          display.textContent = percent(b);
          b = percent(b);
        }
    });

  </script>
</body>

</html>